data:
  configManagementPlugins: |-
    - name: kustom-plugin
      init:
      # Init always happens immediately before generate, but its output is not treated as manifests.
      # This is a good place to, for example, download chart dependencies.
        command: [sh, -c, 'echo "Initializing plugin"']
      generate:
        command: ["/bin/sh", "-c"]
        args: ["API_HOST_NAME=${ARGOCD_ENV_API_HOST_NAME} PROJECT_ID=${ARGOCD_ENV_PROJECT_ID} VAULT_NAME=${ARGOCD_ENV_VAULT_NAME} GCP_REGION=${ARGOCD_ENV_GCP_REGION} kustomize build"]

# kubectl patch cm argocd-cm -n argocd --patch-file argocd/plugin/argo-cd-cm.yaml
